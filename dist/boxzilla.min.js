"use strict";!function r(s,l,a){function c(e,t){if(!l[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(d)return d(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=l[e]={exports:{}};s[e][0].call(o.exports,function(t){return c(s[e][1][t]||t)},o,o.exports,r,s,l,a)}return l[e].exports}for(var d="function"==typeof require&&require,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,e,i){var o=320;function c(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i])}function d(a,c,d){var h=+new Date,t=window.getComputedStyle(a),g={},u={};for(var e in c)if(c.hasOwnProperty(e)){c[e]=parseFloat(c[e]);var i=c[e],n=parseFloat(t[e]);n!==i?(u[e]=(i-n)/o,g[e]=n):delete c[e]}!function t(){var e,i,n,o,r=+new Date-h,s=!0;for(var l in c)c.hasOwnProperty(l)&&(e=u[l],i=c[l],n=e*r,o=g[l]+n,0<e&&i<=o||e<0&&o<=i?o=i:s=!1,g[l]=o,a.style[l]="opacity"!==l?o+"px":o);h=+new Date,s?d&&d():window.requestAnimationFrame(t)}()}e.exports={toggle:function(t,e,i){function n(){t.removeAttribute("data-animated"),t.setAttribute("style",l.getAttribute("style")),t.style.display=s?"none":"",i&&i()}var o,r,s="none"!==t.style.display||0<t.offsetLeft,l=t.cloneNode(!0);if(t.setAttribute("data-animated","true"),s||(t.style.display=""),"slide"===e){if(o=function(t,e){for(var i={},n=0;n<t.length;n++)i[t[n]]=e;return i}(["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],0),r={},!s){if(r=function(t,e){for(var i={},n=0;n<t.length;n++)i[t[n]]=e[t[n]];return i}(["height","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],window.getComputedStyle(t)),!isFinite(r.height)){var a=t.getBoundingClientRect();r.height=a.height}c(t,o)}t.style.overflowY="hidden",d(t,s?o:r,n)}else o={opacity:0},r={opacity:1},s||c(t,o),d(t,s?o:r,n)},animate:d,animated:function(t){return!!t.getAttribute("data-animated")}}},{}],2:[function(t,e,i){var n={animation:"fade",rehide:!1,content:"",cookie:null,icon:"&times",screenWidthCondition:null,position:"center",testMode:!1,trigger:!1,closable:!0},o=t("./animator.js");function r(t,e,i){this.id=t,this.fireEvent=i,this.config=function(t,e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);return i}(n,e),this.overlay=document.createElement("div"),this.overlay.style.display="none",this.overlay.id="boxzilla-overlay-"+this.id,this.overlay.classList.add("boxzilla-overlay"),document.body.appendChild(this.overlay),this.visible=!1,this.dismissed=!1,this.triggered=!1,this.triggerHeight=this.calculateTriggerHeight(),this.cookieSet=this.isCookieSet(),this.element=null,this.contentElement=null,this.closeIcon=null,this.dom(),this.events()}r.prototype.events=function(){var o=this;this.closeIcon&&this.closeIcon.addEventListener("click",function(t){t.preventDefault(),o.dismiss()}),this.element.addEventListener("click",function(t){"A"===t.target.tagName&&this.fireEvent("box.interactions.link",[o,t.target])},!1),this.element.addEventListener("submit",function(t){o.setCookie(),this.fireEvent("box.interactions.form",[o,t.target])},!1),this.overlay.addEventListener("click",function(t){var e=t.offsetX,i=t.offsetY,n=o.element.getBoundingClientRect();(e<n.left-40||e>n.right+40||i<n.top-40||i>n.bottom+40)&&o.dismiss()})},r.prototype.dom=function(){var t=document.createElement("div");t.className="boxzilla-container boxzilla-"+this.config.position+"-container";var e,i=document.createElement("div");if(i.id="boxzilla-"+this.id,i.className="boxzilla boxzilla-"+this.id+" boxzilla-"+this.config.position,i.style.display="none",t.appendChild(i),"string"==typeof this.config.content?(e=document.createElement("div")).innerHTML=this.config.content:(e=this.config.content).style.display="",e.className="boxzilla-content",i.appendChild(e),this.config.closable&&this.config.icon){var n=document.createElement("span");n.className="boxzilla-close-icon",n.innerHTML=this.config.icon,i.appendChild(n),this.closeIcon=n}document.body.appendChild(t),this.contentElement=e,this.element=i},r.prototype.setCustomBoxStyling=function(){var t=this.element.style.display;this.element.style.display="",this.element.style.overflowY="",this.element.style.maxHeight="";var e=window.innerHeight,i=this.element.clientHeight;if(e<i&&(this.element.style.maxHeight=e+"px",this.element.style.overflowY="scroll"),"center"===this.config.position){var n=(e-i)/2;n=0<=n?n:0,this.element.style.marginTop=n+"px"}this.element.style.display=t},r.prototype.toggle=function(t,e){return e=void 0===e||e,(t=void 0===t?!this.visible:t)!==this.visible&&(!o.animated(this.element)&&(!(!t&&!this.config.closable)&&(this.visible=t,this.setCustomBoxStyling(),this.fireEvent("box."+(t?"show":"hide"),[this]),"center"===this.config.position&&(this.overlay.classList.toggle("boxzilla-"+this.id+"-overlay"),e?o.toggle(this.overlay,"fade"):this.overlay.style.display=t?"":"none"),e?o.toggle(this.element,this.config.animation,function(){this.visible||(this.contentElement.innerHTML=this.contentElement.innerHTML+"")}.bind(this)):this.element.style.display=t?"":"none",!0)))},r.prototype.show=function(t){return this.toggle(!0,t)},r.prototype.hide=function(t){return this.toggle(!1,t)},r.prototype.calculateTriggerHeight=function(){var t,e,i=0;if(this.config.trigger)if("element"===this.config.trigger.method){var n=document.body.querySelector(this.config.trigger.value);if(n)i=n.getBoundingClientRect().top}else"percentage"===this.config.trigger.method&&(i=this.config.trigger.value/100*(t=document.body,e=document.documentElement,Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)));return i},r.prototype.fits=function(){if(!this.config.screenWidthCondition||!this.config.screenWidthCondition.value)return!0;switch(this.config.screenWidthCondition.condition){case"larger":return window.innerWidth>this.config.screenWidthCondition.value;case"smaller":return window.innerWidth<this.config.screenWidthCondition.value}return!0},r.prototype.onResize=function(){this.triggerHeight=this.calculateTriggerHeight(),this.setCustomBoxStyling()},r.prototype.mayAutoShow=function(){return!this.dismissed&&(!!this.fits()&&(!!this.config.trigger&&!this.cookieSet))},r.prototype.mayRehide=function(){return this.config.rehide&&this.triggered},r.prototype.isCookieSet=function(){return!(this.config.testMode||!this.config.trigger)&&(!(!this.config.cookie||!this.config.cookie.triggered&&!this.config.cookie.dismissed)&&"true"===document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*boxzilla_box_"+this.id+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))},r.prototype.setCookie=function(t){var e=new Date;e.setHours(e.getHours()+t),document.cookie="boxzilla_box_"+this.id+"=true; expires="+e.toUTCString()+"; path=/"},r.prototype.trigger=function(){this.show()&&(this.triggered=!0,this.config.cookie&&this.config.cookie.triggered&&this.setCookie(this.config.cookie.triggered))},r.prototype.dismiss=function(t){return!!this.visible&&(this.hide(t),this.config.cookie&&this.config.cookie.dismissed&&this.setCookie(this.config.cookie.dismissed),this.dismissed=!0,this.fireEvent("box.dismiss",[this]),!0)},e.exports=r},{"./animator.js":1}],3:[function(t,e,i){var n=t("./box.js"),o=t("./util.js").throttle,r=t("./styles.js"),s=t("./triggers/exit-intent.js"),l=t("./triggers/scroll.js"),a=t("./triggers/pageviews.js"),c=t("./triggers/time.js"),d=!1,h=[],g={};function u(t){"Escape"!==t.key&&"Esc"!==t.key||w()}function f(){h.forEach(function(t){return t.onResize()})}function m(t){for(var e=t.target,i=0;i<=3&&(e&&"A"!==e.tagName);i++)e=e.parentElement;if(e&&"A"===e.tagName&&e.href){var n=e.href.match(/[#&]boxzilla-(.+)/i);n&&1<n.length&&y(n[1])}}function p(t,e){g[t]&&g[t].forEach(function(t){return t.apply(null,e)})}function v(t){t=String(t);for(var e=0;e<h.length;e++)if(h[e].id===t)return h[e];throw new Error("No box exists with ID "+t)}function w(t,e){t?v(t).dismiss(e):h.forEach(function(t){return t.dismiss(e)})}function y(t,e){t?v(t).toggle(e):h.forEach(function(t){return t.toggle(e)})}var b={off:function(t,e){g[t]&&g[t].filter(function(t){return t!==e})},on:function(t,e){g[t]=g[t]||[],g[t].push(e)},get:v,init:function(){if(!d){var t=document.createElement("style");t.innerHTML=r,document.head.appendChild(t),s(h),a(h),l(h),c(h),document.body.addEventListener("click",m,!0),window.addEventListener("resize",o(f)),window.addEventListener("load",f),document.addEventListener("keyup",u),p("ready"),d=!0}},create:function(t,e){void 0!==e.minimumScreenWidth&&(e.screenWidthCondition={condition:"larger",value:e.minimumScreenWidth}),t=String(t);var i=new n(t,e,p);return h.push(i),i},trigger:p,show:function(t,e){t?v(t).show(e):h.forEach(function(t){return t.show(e)})},hide:function(t,e){t?v(t).hide(e):h.forEach(function(t){return t.hide(e)})},dismiss:w,toggle:y,boxes:h};window.Boxzilla=b,void 0!==e&&e.exports&&(e.exports=b)},{"./box.js":2,"./styles.js":4,"./triggers/exit-intent.js":6,"./triggers/pageviews.js":7,"./triggers/scroll.js":8,"./triggers/time.js":9,"./util.js":10}],4:[function(t,e,i){e.exports="#boxzilla-overlay,.boxzilla-overlay{position:fixed;background:rgba(0,0,0,.65);width:100%;height:100%;left:0;top:0;z-index:10000}.boxzilla-center-container{position:fixed;top:0;left:0;right:0;height:0;text-align:center;z-index:11000;line-height:0}.boxzilla-center-container .boxzilla{display:inline-block;text-align:left;position:relative;line-height:normal}.boxzilla{position:fixed;z-index:12000;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;background:#fff;padding:25px}.boxzilla.boxzilla-top-left{top:0;left:0}.boxzilla.boxzilla-top-right{top:0;right:0}.boxzilla.boxzilla-bottom-left{bottom:0;left:0}.boxzilla.boxzilla-bottom-right{bottom:0;right:0}.boxzilla-content>:first-child{margin-top:0;padding-top:0}.boxzilla-content>:last-child{margin-bottom:0;padding-bottom:0}.boxzilla-close-icon{position:absolute;right:0;top:0;text-align:center;padding:6px;cursor:pointer;-webkit-appearance:none;font-size:28px;font-weight:700;line-height:20px;color:#000;opacity:.5}.boxzilla-close-icon:focus,.boxzilla-close-icon:hover{opacity:.8}"},{}],5:[function(t,e,i){function n(){this.time=0,this.interval=0}n.prototype.tick=function(){this.time++},n.prototype.start=function(){this.interval||(this.interval=window.setInterval(this.tick.bind(this),1e3))},n.prototype.stop=function(){this.interval&&(window.clearInterval(this.interval),this.interval=0)},e.exports=n},{}],6:[function(t,e,i){e.exports=function(t){var e=null,i={};function n(){document.documentElement.removeEventListener("mouseleave",s),document.documentElement.removeEventListener("mouseenter",r),document.documentElement.removeEventListener("click",o),window.removeEventListener("touchstart",l),window.removeEventListener("touchend",a),t.forEach(function(t){t.mayAutoShow()&&"exit_intent"===t.config.trigger.method&&t.trigger()})}function o(){null!==e&&(window.clearTimeout(e),e=null)}function r(){o()}function s(t){o(),t.clientY<=(document.documentMode||/Edge\//.test(navigator.userAgent)?5:0)&&t.clientX<.8*window.innerWidth&&(e=window.setTimeout(n,600))}function l(){o(),i={timestamp:performance.now(),scrollY:window.scrollY,windowHeight:window.innerHeight}}function a(t){o(),window.innerHeight>i.windowHeight||window.scrollY+20>i.scrollY||300<performance.now()-i.timestamp||-1<["A","INPUT","BUTTON"].indexOf(t.target.tagName)||(e=window.setTimeout(n,800))}window.addEventListener("touchstart",l),window.addEventListener("touchend",a),document.documentElement.addEventListener("mouseenter",r),document.documentElement.addEventListener("mouseleave",s),document.documentElement.addEventListener("click",o)}},{}],7:[function(t,e,i){e.exports=function(t){var e;try{e=sessionStorage.getItem("boxzilla_pageviews")||0,sessionStorage.setItem("boxzilla_pageviews",++e)}catch(t){e=0}window.setTimeout(function(){t.forEach(function(t){"pageviews"===t.config.trigger.method&&e>t.config.trigger.value&&t.mayAutoShow()&&t.trigger()})},1e3)}},{}],8:[function(t,e,i){var n=t("../util.js").throttle;e.exports=function(t){function e(){var e=window.hasOwnProperty("pageYOffset")?window.pageYOffset:window.scrollTop;e+=.9*window.innerHeight,t.forEach(function(t){!t.mayAutoShow()||t.triggerHeight<=0||(e>t.triggerHeight?t.trigger():t.mayRehide()&&e<t.triggerHeight-5&&t.hide())})}window.addEventListener("touchstart",n(e),!0),window.addEventListener("scroll",n(e),!0)}},{"../util.js":10}],9:[function(t,e,i){var r=t("../timer.js");e.exports=function(t){var e=new r,i=new r,n=function(){try{var t=parseInt(sessionStorage.getItem("boxzilla_timer"));t&&(e.time=t)}catch(t){}e.start(),i.start()},o=function(){sessionStorage.setItem("boxzilla_timer",e.time),e.stop(),i.stop()};n(),document.addEventListener("visibilitychange",function(){(document.hidden?o:n)()}),window.addEventListener("beforeunload",function(){o()}),window.setInterval(function(){t.forEach(function(t){"time_on_site"===t.config.trigger.method&&e.time>t.config.trigger.value&&t.mayAutoShow()?t.trigger():"time_on_page"===t.config.trigger.method&&i.time>t.config.trigger.value&&t.mayAutoShow()&&t.trigger()})},1e3)}},{"../timer.js":5}],10:[function(t,e,i){e.exports={throttle:function(n,o,r){var s,l;return o=o||800,function(){var t=r||this,e=+new Date,i=arguments;s&&e<s+o?(clearTimeout(l),l=setTimeout(function(){s=e,n.apply(t,i)},o)):(s=e,n.apply(t,i))}}}},{}]},{},[3]);
//# sourceMappingURL=boxzilla.min.js.map
